(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b35c446"],{"07ff":function(t,e,s){},"9db9":function(t,e,s){"use strict";var a=s("d6e3"),o=s.n(a);o.a},b789:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-5"},[s("div",{staticClass:"my-5 row justify-content-center"},[s("table",{staticClass:"table"},[s("thead"),t.cart.carts?s("tbody",t._l(t.cart.carts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)]),s("td",{staticClass:"align-middle"},[t._v("\n              "+t._s(e.product.title)+"\n              "),e.coupon?s("div",{staticClass:"text-success",staticStyle:{"font-size":"12px"}},[t._v("已套用優惠券")]):t._e()]),s("td",{staticClass:"align-middle"},[t._v("數量 "+t._s(e.qty))]),s("td",{staticClass:"align-middle text-right"},[t._v("NT$ "+t._s(e.final_total))])])}),0):t._e(),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v("NT$ "+t._s(t.cart.total))])]),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-success"},[t._v("NT$ "+t._s(t.cart.final_total))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])]),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary",on:{click:t.goShop}},[t._v("繼續選購")])])])]),s("div",{staticClass:"col-lg-7",staticStyle:{"background-color":"#949c7c"}},[s("CartPaymentForm")],1)])},o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"my-5 justify-content-center bg"},[s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.passes;return[s("form",{ref:"inputRule",staticClass:"form",on:{submit:function(e){return e.preventDefault(),a(t.createOrder)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 mb-3"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),s("ValidationProvider",{attrs:{name:"username",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return s("div",{},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])}}],null,!0)})],1)]),s("div",{staticClass:"col-md-6 mb-3"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),s("ValidationProvider",{attrs:{name:"usertel",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return s("div",{},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])}}],null,!0)})],1)])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),s("ValidationProvider",{attrs:{name:"address",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return s("div",{},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useremail"}},[t._v("Email")]),s("ValidationProvider",{attrs:{name:"email",rules:"required",type:"email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return s("div",{},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])}}],null,!0)})],1),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary"},[t._v("送出訂單")])])])]}}])})],1)])},n=[],i=s("7bb1"),c={name:"CartPaymentForm",components:{ValidationObserver:i["a"],ValidationProvider:i["b"]},data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("sue","/order"),s=t.form;t.isLoading=!0,this.$http.post(e,{data:s}).then(function(e){console.log("訂單已建立",e),e.data.success&&t.$router.push("/customer_checkout/".concat(e.data.orderId)),t.isLoading=!1})}}},l=c,u=(s("9db9"),s("2877")),d=Object(u["a"])(l,r,n,!1,null,"53b6ce26",null),m=d.exports,p={name:"Cart",components:{CartPaymentForm:m},props:{},created:function(){console.log("this.cart"),this.getCart()},data:function(){return{coupon_code:"",cart:""}},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("sue","/cart");t.isLoading=!0,this.$http.get(e).then(function(e){t.cart=e.data.data,console.log("getCart"),console.log(t.cart),t.isLoading=!1})},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("sue","/coupon"),s={code:this.coupon_code};t.isLoading=!0,this.$http.post(e,{data:s}).then(function(e){console.log(e),t.getCart(),t.isLoading=!1})},removeCartItem:function(t){var e=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("sue","/cart/").concat(t);e.isLoading=!0,this.$http.delete(s).then(function(){e.getCart(),e.isLoading=!1})},goShop:function(){this.$router.push("/shop")}}},f=p,v=(s("fab3"),Object(u["a"])(f,a,o,!1,null,"1b252370",null));e["default"]=v.exports},d6e3:function(t,e,s){},fab3:function(t,e,s){"use strict";var a=s("07ff"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-8b35c446.19f5343b.js.map